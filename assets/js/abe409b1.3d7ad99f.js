"use strict";(self.webpackChunknanc_docs=self.webpackChunknanc_docs||[]).push([[7373],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>h});var n=a(7294);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var s=n.createContext({}),d=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):r(r({},t),e)),a},c=function(e){var t=d(e.components);return n.createElement(s.Provider,{value:t},e.children)},u="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,i=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=d(a),m=i,h=u["".concat(s,".").concat(m)]||u[m]||p[m]||o;return a?n.createElement(h,r(r({ref:t},c),{},{components:a})):n.createElement(h,r({ref:t},c))}));function h(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=a.length,r=new Array(o);r[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[u]="string"==typeof e?e:i,r[1]=l;for(var d=2;d<o;d++)r[d]=a[d];return n.createElement.apply(null,r)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},4751:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>p,frontMatter:()=>o,metadata:()=>l,toc:()=>d});var n=a(7462),i=(a(7294),a(3905));const o={sidebar_position:5},r="Logic",l={unversionedId:"nui/logic",id:"nui/logic",title:"Logic",description:"Nanc not only allows you to render UIs from XML code, but has some support for execution logic that you can program as well, via XML markup.",source:"@site/docs/nui/logic.md",sourceDirName:"nui",slug:"/nui/logic",permalink:"/docs/nui/logic",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/nui/logic.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Text",permalink:"/docs/nui/text"},next:{title:"Built-in Help",permalink:"/docs/built_in_help"}},s={},d=[{value:"If",id:"if",level:2},{value:"Iteration",id:"iteration",level:2},{value:"Data",id:"data",level:2},{value:"Variables",id:"variables",level:2},{value:"Events",id:"events",level:2},{value:"Interactivity",id:"interactivity",level:2},{value:"Calculations",id:"calculations",level:2}],c={toc:d},u="wrapper";function p(e){let{components:t,...a}=e;return(0,i.kt)(u,(0,n.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"logic"},"Logic"),(0,i.kt)("p",null,"Nanc not only allows you to render UIs from XML code, but has some support for execution logic that you can program as well, via XML markup."),(0,i.kt)("p",null,"This section will give a brief reference to existing widgets/tags, and other aspects related to logic execution. Data extraction and modification, and more."),(0,i.kt)("p",null,"We deliberately do not provide in-depth help on tags, as it is already well documented in Nanc itself, besides, Nanc documentation will allow you to see the results right on the screen, and modify them in real time. So if you want to learn more about any widget/tagging aspects - check out the Nanc documentation available in any ",(0,i.kt)("inlineCode",{parentName:"p"},"ScreenField")," editor."),(0,i.kt)("h2",{id:"if"},"If"),(0,i.kt)("p",null,"Conditional rendering of widgets/tags is possible with the help of a special tag ",(0,i.kt)("inlineCode",{parentName:"p"},"<show>"),'. This tag allows you to show or hide subtrees of widgets placed inside it using logical conditions. In this case, the widget that "should not be rendered" will not be simply hidden, it will not be physically created, which will favorably affect the performance of your application.'),(0,i.kt)("h2",{id:"iteration"},"Iteration"),(0,i.kt)("p",null,"A special widget/tag ",(0,i.kt)("inlineCode",{parentName:"p"},"<for>")," allows you to iterate both values and prime numbers. You can specify a numeric range, or specify some list available from the ",(0,i.kt)("inlineCode",{parentName:"p"},"DataStorage")," global data store and parent context"),(0,i.kt)("h2",{id:"data"},"Data"),(0,i.kt)("p",null,"You can draw the Nui interface based on the data, and update this interface when the data is updated. The following widgets/tags will help you do this: ",(0,i.kt)("inlineCode",{parentName:"p"},"<data>")," - a tag that allows you to specify certain values on keys to be placed in ",(0,i.kt)("inlineCode",{parentName:"p"},"DataStorage"),". This can be useful if you want to be able to change over-used parameters in one place, or if you are forming some complex data structure that will determine the appearance of any elements on the screen. Second tag: ",(0,i.kt)("inlineCode",{parentName:"p"},"<dataBuilder>")," - allows you to update nested elements when the data used in these elements changes, or generate events when the corresponding data changes."),(0,i.kt)("p",null,"If you want to predefine ",(0,i.kt)("inlineCode",{parentName:"p"},"<data>")," variables, in addition to using the widgets themselves - ",(0,i.kt)("inlineCode",{parentName:"p"},"NuiListWidget")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"NuiStackWidget")," - you need to use the following widget and class somewhere in the parent zone of these widgets:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-dart"},"class _RootViewState extends State<RootView> {\n  /// Created DataStorage will contains all the data, from the subtree, under what's it will be declared\n  /// You able to have as many DataStorage's as you want, or you can have only one for whole app\n  final DataStorage dataStorage = DataStorage(data: <String, String>{});\n\n  @override\n  Widget build(BuildContext context) {\n    /// DataStorageProvider allows us to provide data from DataStorage below to it's subtree and update corresponding widget/tags\n    return DataStorageProvider(\n      dataStorage: dataStorage,\n      child: Scaffold(\n        body: NuiListWidget(\n          renderers: [\n            svgRenderer(),\n          ],\n          xmlContent: rootViewLayout,\n          pageData: {},\n        ),\n      ),\n    );\n  }\n}\n")),(0,i.kt)("h2",{id:"variables"},"Variables"),(0,i.kt)("p",null,"In the Nui, you have access to the following data sources:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},'Parent context - data that is intended to be changed only by the "consumer" of the Nui widgets. For example, if you want to display a list of product cards, it makes sense to place the data of these products in this data source. No additional actions are required from your side to use it. And in XML code you can access any element in the following format: ',(0,i.kt)("inlineCode",{parentName:"li"},'someAttribute="{{ page.some.key }}"'),"."),(0,i.kt)("li",{parentName:"ul"},"The global data store is ",(0,i.kt)("inlineCode",{parentName:"li"},"DataStorage"),". This data source allows you to store the same list as the previous one, however, you can manipulate the data in this source through the Nui XML markup. You can access any value from the ",(0,i.kt)("inlineCode",{parentName:"li"},"DataStorage")," by using ",(0,i.kt)("inlineCode",{parentName:"li"},"{{ data.some.key }}")," or iterate through it with ",(0,i.kt)("inlineCode",{parentName:"li"},'in="{{ data.products }}"'),". More on this below"),(0,i.kt)("li",{parentName:"ul"},"Templates and components - special widgets/tags that allow you to reuse your components described in XML. When declaring a template, inside the ",(0,i.kt)("inlineCode",{parentName:"li"},"<template>")," tag you can place a call to any attributes in ",(0,i.kt)("inlineCode",{parentName:"li"},"{{ template.someKey }}")," format. And then, using this template with the ",(0,i.kt)("inlineCode",{parentName:"li"},"<component>")," tag, you can specify attributes with the same keys, thus passing the data inside the template component")),(0,i.kt)("h2",{id:"events"},"Events"),(0,i.kt)("p",null,"Nanc offers an event-based model of user interaction. This means that those of the widgets/tags that involve some kind of interaction can send some kind of events that you can generate. Then, you implement handlers for the corresponding events, thus achieving as much complexity and flexibility in your application's logic model as you want."),(0,i.kt)("h2",{id:"interactivity"},"Interactivity"),(0,i.kt)("p",null,"You can modify data in ",(0,i.kt)("inlineCode",{parentName:"p"},"DataStorage")," with the ",(0,i.kt)("inlineCode",{parentName:"p"},"emit")," pre-defined event, which, if the event contains metadata, allows you to create/save/modify in ",(0,i.kt)("inlineCode",{parentName:"p"},"DataStorage"),". Those events that contain metadata are marked in Nanc documentation with a special bar - ",(0,i.kt)("inlineCode",{parentName:"p"},"This event will send you additional metadata with....."),". For example, ",(0,i.kt)("inlineCode",{parentName:"p"},"onChange")," event of widget/tag ",(0,i.kt)("inlineCode",{parentName:"p"},"<textField>")," contains metadata with ",(0,i.kt)("inlineCode",{parentName:"p"},"value")," key and value - the text you entered into this field. If there is only one key in the metadata (which is the case in the vast majority of such events) - then this key is omitted, as its name will not carry any useful information anyway. Consider the following example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},'<textField onChanged="emit:password"/>\n')),(0,i.kt)("p",null,"When you change the text entered in this field, the value will be automatically stored in ",(0,i.kt)("inlineCode",{parentName:"p"},"DataStorage"),", with the ",(0,i.kt)("inlineCode",{parentName:"p"},"password")," key:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "password": "your_password"\n}\n')),(0,i.kt)("p",null,"In this case, the keys can also be compound keys:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},'<textField onChanged="emit:user.name"/>\n')),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "user": {\n    "name": "your_user_name"\n  }\n}\n')),(0,i.kt)("h2",{id:"calculations"},"Calculations"),(0,i.kt)("p",null,"You can use math operators in calculated expressions in your Nui code. For example, you can use the following form to specify the ",(0,i.kt)("inlineCode",{parentName:"p"},"ratio")," parameter of the ",(0,i.kt)("inlineCode",{parentName:"p"},"<aspectRatio>")," widget/tag:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html"},'<aspectRatio ratio="{{ 4 / 3 }}">\n  \x3c!-- Some child --\x3e\n</aspectRatio>\n')),(0,i.kt)("p",null,"All of the features currently available are well described in this package: ",(0,i.kt)("a",{parentName:"p",href:"https://pub.dev/packages/eval_ex"},"https://pub.dev/packages/eval_ex")),(0,i.kt)("p",null,"In addition, there are several aliases that may also be useful to you:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"&&")," has the alias ",(0,i.kt)("inlineCode",{parentName:"li"},"and"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"||")," has the alias ",(0,i.kt)("inlineCode",{parentName:"li"},"or"))),(0,i.kt)("p",null,"Additional features that will emerge over time will be reflected in this section."))}p.isMDXComponent=!0}}]);